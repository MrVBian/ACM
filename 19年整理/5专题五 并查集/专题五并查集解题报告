专题五并查集


A POJ 2236 Wireless Network
题意：
　　有一个计算机网络的所有线路都坏了，网络中有n台计算机，现在你可以做两种操作，修理（O）和检测两台计算机是否连通（S），
    只有修理好的计算机才能连通。连通有个规则，两台计算机的距离不能超过给定的最大距离D（一开始会给你n台计算机的坐标）。
    检测的时候输出两台计算机是否能连通。
 
思路：
　　每次修理好一台计算机的时候就遍历一下所有修好的计算机，看距离是否<=D，如果符合说明可以连通，将两台计算机所在集合合并。
　　每次检查的时候判断一下这两台计算机是否在同一集合中即可。
 
注意：
　　1、坐标之后给出的计算机编号都是n+1的。例如O 3，他实际上修理的是编号为2的计算机，因为计算机是从0开始编号的。
　　2、比较距离的时候注意要用浮点数比较，否则会WA。
　　3、字符串输入的时候注意处理好回车，空格等情况。
　　4、注意N的范围（1 <= N <= 1001），最大是1001，不是1000。是个小坑。


B POJ 1611 The Suspects
题意：
    n个学生分属m个团体，一个学生可以属于多个团体。一个学生疑似患病，则他所属的整个团体都疑似患病。已知0号学生疑似患病，
    以及每个团体都有哪些学生构成，求一共多少个学生疑似患病。
思路：
    找一个arr[]数组记录每一个团体的学生编号，同一团体的学生Union，去重得到所有学生编号，若Find(学生编号)==Find(0),
    则为患病学生。


C HDU 1213 How Many Tables
题意：
    输入T组数据，每组有n人m对关系，有认识关系可分为一组，问最少需要几组
思路：
    认识的人用Union互连。找一个res数组，遍历人编号i，若res[ Find(i) ] == 0 则组ans++,否则res[ Find(i) ]++

!!!
D HDU 3038 How Many Answers Are Wrong
题意：
    n表示有一个长度为n的数组, 接下来有m行形如x, y, d的输入, 表示从第x个元素到第y个元素的和为d(包括x, 和y), 问m行输
    入里面有几个是错误的(第一个输入是正确的);
思路：
    带权并查集,可以用距离的概念代替和的概念，d表示x到y的和即x到y的距离。可以用d[x]表示x到其父亲节点的距离,  
    将正确的距离关系合并到并查集中(错误的当然不能合并到里面啦);
注意：
    要注意的是这里的x, y是闭区间, 不好直接处理, 要先将其变成开区间来, [x, y]等价于(x-1, y]或者[x, y+1);


!!!!经典
E POJ 1182 食物链
题意：
    食物链A吃B，B吃C，C吃A。有如下规则：
        第一种说法是"1 X Y"，表示X和Y是同类。 
        第二种说法是"2 X Y"，表示X吃Y。 
    当一句话满足下列三条之一时，这句话就是假话，否则就是真话。 
        1） 当前的话与前面的某些真的话冲突，就是假话； 
        2） 当前的话中X或Y比N大，就是假话； 
        3） 当前的话表示X吃X，就是假话。
    给定n动物数和k句话，一句接一句地说出K句话，判断假话个数。 
思路：
    三类关系：同类，吃，被吃，故而给每个动物分配三个结点。
    这样并查集的节点数量扩展到3n，用并查集维护这3n个节点的信息
    关系如下：a、b同类      a吃b             a被b吃
        a_n  == b_n     a_n  == b_2n    a_n  == b_3n
        a_2n == a_2n    a_2n == b_3n    a_2n == b_n
        a_3n == a_3n    a_3n == b_3     a_3n == b_2n


F POJ 1417 True Liars
!!!!!
题意：给你p1个天使和p2个恶魔，编号为1--p1+p2，然后给你n个结论
    x1 x2 no ：x1说x2不是天使
    x1 x2 yes：x1说x2是天使
    在这里天使说的总是对的，恶魔说的总是坏的，然后问你最后能不能唯一确定哪些是天使，不能就输出no，每次以end结尾
思路：
    步骤一：逻辑分析
        对于输入x, y, yes，假设x为天使，则y也为为天使，若x为恶魔，那么y也为恶魔，即x, y, 同为恶魔或者天使；
        对于输入x, y, no ，同理可得x, y, 一者为天使一者为恶魔；
        即可得ch为yes时，x, y, 属同种，ch为no时， x, y属异种；故选用种类并查集（带权并查集权值为0/1）
        这样我们可以获得cnt组集合，每组分为两类天使和恶魔，用w0[i],w1[i]表示第i个集合两个小集合的个数。
    步骤二：组划分
        利用背包解决，dp[i][j]表示前i个(0<=i<=cnt-1)大集合天使为j个的方案数，第i种状态只能是由第i-1种状态而来，
        所以dp[i][j]可以由dp[i-1][j-w0[i]]和dp[i-1][j-w1[i]]得来。
        状态转换方程：
            dp[i][j] = dp[ i-1 ][ j-w0[i] ] + dp[ i-1 ][ j-w1[i] ];
        这样我们只需判断dp[cnt-1][p1]是否等于1。(注意不是序列型动态规划)
    步骤三：得出天使编号
        逆向dp，若dp[i-1][p1-w0[i]] == 1则第i组的w0组为天使
        因为结果唯一，否则，dp[i-1][p1-w0[i]] == 0 dp[i-1][p1-w1[i]] == 1则第i组的w1组为天使。


G POJ 1456 Supermarket
题意：
    n个物品，给定n个物品出售截止时间和价格。问最多可以卖多少钱。
思路：
    贪心题，以价格递降排序，优先卖价格高的，尽可能在截止时间卖，如果截止时间已用来卖其它物品，则向前推移一天卖
    可以使用优先队列做，但是并查集更快更简单。此题用并查集简洁高效。


H POJ 1733 Parity game
题意：
    输入n(<=1e10)表示有一个长度为n的0,1字符串, m(<=5000)表示接下来有m行输入, 
    接下来的m行输入中x, y, even表示第x到第y个字符中间1的个数为偶数个, 
    x, y, odd表示第x到第y个字符中间1的个数为奇数个, 若m句话中第k+1是第一次与前面的话矛盾, 输出k;否则输出-1
思路：
    共有两种思路可解
    1离散化+种类并查集
        n的范围可能取1e10，但是最多m(<=5000)次操作，故而总共被操作的数<=m*2。1e10的数组无法开，那么可以离散化，
        利用map映射机制重新给x，y标号，然后利用种类并查集得到答案。
    2离散化+扩展域并查集
        智商不在线，三小时贡献未AC


I POJ 1984 Navigation Nightmare
题意：
    给n个点和m操作，每次操作都有a b d op ，表示a点在b点的op方向（有东南西北）距离为d，那么之后会有K次操作，a b c ，
    表示在第c次操作之前a和b之间的距离。

思路：
    首先他说的是第c次操作之前，也就是没有办法直接把并查集全部的建立好，所以要把操作存起来，有四个方向，东南西北，可以
    建立两个并查集一个是东西方向一个是南北方向，规定东西和南北的正方向，维护两个ew、ns距离数组
    将查询语句按照时间递增顺序排序，顺序执行。
注意：
    输出结果时应该按照询问的顺序给出结果而不是按照时间顺序。


J POJ 2492 A Bug's Life
题意：
    有t组测试数据, 对于每组数据，第一行n, m分别表示昆虫的数目和接下来m行x, y
    x, y表示教授判断x, y为异性, 问教授是否有错误判断,即存在x, y为同性;
思路：
    种类并查集。
    亦可使用扩展域并查集。
注意：
    智商税，Union 调用Find 不是par[]!!!!!!!!!!!!!!!!!!!!
    脑子是个好东西
后记：
    继续交智商税。。。。使用扩展域并查集。Union(x, y+n);y+n不是y+maxn;


K POJ 2912 Rochambeau
题意：
    n个人进行m轮剪刀石头布游戏，接下来m行形如x, y, ch的输入，
    ch='='表示x, y平局，ch='>'表示x赢y，ch='<'表示x输y, 
    但是我们不知道x, y的手势是什么; 
    其中有一个人是裁判，它可以出任意手势，其余人手势相同的分一组，共分为三组，可以存在空组，
    也就是说除了裁判外，其余人每一次出的手势都相同，问能不能确定裁判是几号，
    如果能，输出最少在第几轮可以确定；
思路：
    有可能出现一个或多个异常。在以下方法中，枚举每个人是异常的情况，观察有多少个人可能是裁判。
    如果有多个人成为裁判使体系融洽，那么不能确定；
    如果没有一个人成为裁判后体系融洽，那么就没有答案；
    如果只有一个人可能成为裁判，那么我们得出判断的轮数，就是其他人成为裁判时，使体系不融洽的最大轮数。


L ZOJ 3261 Connections in Galaxy War
题意：
    n个星球具有各自的强度val[]，每个星球只能向强度大于自己的星球求助，给出一些连通关系之后，询问分为两类，
    查询某个星球是否可以求助到或者破坏某两个相连星球连接关系。

题解：
    灵活的使用并查集，并查集并不支持删除操作，但是如果我们倒过来看，将破坏边看作是加入边，那就是一道简单的并查集题目。
    主要是这个题目实现中有一些技巧，值得一记。
注意：
    1，合理的应用SLT使得代码简洁。比如应用到map和哈希的思想使得判断某条边是否被摧毁，变得效率高且简单。
    2，在解题时时常要想到倒置的思想，有时正着看很难的问题，倒过来看就豁然开朗。
    3，最后，注意下输出格式。


M HDU 1272 小希的迷宫
题意：
    本题持续输入包含两房间的道路每次输入到0 0截止视为一个迷宫，要求迷宫所有房间连通且任意两个房间之间只有唯一的
    一条道路，这就要求给出的图是一个无向连通无环图，即一棵树。
思路：
    1、利用并查集确定没有图。
    2、检查是否只有一个树而不是森林。


N POJ 1308 Is It A Tree?
题意：
    判断给定的边是否构成一颗树
题解：
    利用树的边数=点数-1